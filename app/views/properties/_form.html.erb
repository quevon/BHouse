<%= form_with(model: property) do |form| %>
  <% if property.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(property.errors.count, "error") %> prohibited this property from being saved:</h2>

      <ul>
        <% property.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="form-container">
    <div class="mb-6">
      <%= form.label :property_type, :class => "block-label"%>
      <%= form.select :property_type, ["house", "apartment", "condominium", "dormitory"], {}, {:class => "select-input"} %>
    </div>

    <div class="mb-6">
      <%= form.label :listing_type, :class => "block-label" %>
      <%= form.select :listing_type, ["entire unit", "bedspace", "room"], {}, {:class => "select-input"}%>
    </div>

    <div class="mb-6 col-span-2"
      <%= form.label :accomodation_type, :class => "normal-label" %>
      <% accomodations = ["male", "female", "student", "working", "couple", "family"]%>
      <% accomodations.each do |accomodation| %>
        <%= form.check_box :accomodation_type, { :multiple => true, :checked => true }, accomodation, nil %>
        <%= form.label accomodation, :class => "normal-label" %>
      <% end %>
    </div>

    <div class="mb-6 col-span-2"
      <%= form.label :amenities, :class => "block mb-2 text-md font-medium text-gray-900 dark:text-gray-300" %>
      <% amenities = ["aircon", "wifi", "parking", "cooking", "gym", "pool"]%>
      <% amenities.each do |amenity| %>
        <%= form.check_box :amenities, { :multiple => true, :checked => true }, amenity, nil %>
        <%= form.label amenity %>
      <% end %>
    </div>

    <div class="mb-6 col-span-2"
      <%= form.label :house_rules, :class => "block mb-2 text-md font-medium text-gray-900 dark:text-gray-300" %>
      <% house_rules = ["kids", "pets", "smoking", "visitors"]%>
      <% house_rules.each do |rule| %>
        <%= form.check_box :house_rules, { :multiple => true, :checked => true }, rule, nil %>
        <%= form.label rule %>
      <% end %>
    </div>

    <div class="mb-6">
      <%= form.label :monthly_price, :class => "block mb-2 text-md font-medium text-gray-900 dark:text-gray-300" %>
      <%= form.text_field :monthly_price %>
    </div>

    <div class="mb-6">
      <%= form.label :deposit_advance, :class => "block mb-2 text-md font-medium text-gray-900 dark:text-gray-300" %>
      <%= form.text_field :deposit_advance %>
    </div>

    <div class="mb-6">
      <%= form.label :deposit_security, :class => "block mb-2 text-md font-medium text-gray-900 dark:text-gray-300" %>
      <%= form.text_field :deposit_security %>
    </div>

    <div class="mb-6">
      <%= form.label :other_fees, :class => "block mb-2 text-md font-medium text-gray-900 dark:text-gray-300" %>
      <%= form.text_field :other_fees %>
    </div>

    <div data-controller="places" data-action="google-maps-callback@window->places#initAutocomplete" class="col-span-2">
      <label for="address" class="block mb-2 text-md font-medium text-gray-900 dark:text-gray-300">Address</label>
      <input type="text" name="property[long_address]" id="address" autocomplete="off" 
      data-action="keyup->places#initializeSearch" data-places-target="address" placeholder="Search a location">
      <button data-action="click->places#findMyLocation">cuurent location</button>
      <input type="hidden" name="property[location_city]" data-places-target="city">
      <input type="hidden" name="property[location_lat]" data-places-target="lat">
      <input type="hidden" name="property[location_lng]" data-places-target="lng">
      <div data-places-target="map" class="map"></div>
    </div>

    <div class="mb-6 col-span-2">
      <%= form.label :image, :class => "block mb-2 text-md font-medium text-gray-900 dark:text-gray-300" %>
      <%= form.file_field :image %>
    </div>

    <%= form.hidden_field :owner_id, value: current_owner.id %>
    <%= form.hidden_field :approved, value: true %>

    <div class="actions col-span-2">
      <%= form.submit %>
    </div>
  </div>

  


  
<% end %>
